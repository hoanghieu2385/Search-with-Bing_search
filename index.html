<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bing Auto Search</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="bing-tool">
      <div class="bing-tool__header">
        <h1 class="bing-tool__title">Bing Search Tool</h1>
      </div>

      <div id="status-display" class="bing-tool__status">Sẵn sàng!</div>

      <div class="bing-tool__controls">
        <button id="btn-start" class="btn btn-primary bing-tool__button"><i class="fas fa-play"></i> Bắt đầu</button>
        <a href="https://rewards.bing.com/" target="_blank" id="btn-rewards" class="btn btn-success bing-tool__button">
          <i class="fas fa-star"></i> Điểm
        </a>
        <button id="btn-stop" class="btn btn-danger bing-tool__button" style="display: none">Stop</button>
      </div>

      <div class="bing-tool__settings">
        <a class="settings__toggle" data-bs-toggle="collapse" href="#settings-panel" role="button">
          <i class="fas fa-cog me-2"></i>Cài đặt
        </a>
        <div class="collapse settings__panel" id="settings-panel">
          <div class="settings__item">
            <label for="slc-limit" class="form-label">Số lần tìm kiếm:</label>
            <select class="form-select" id="slc-limit">
              <option value="15">15 lần</option>
              <option value="25">25 lần</option>
              <option value="35" selected>35 lần (Mặc định)</option>
              <option value="25">45 lần</option>
              <option value="25">55 lần</option>
              <option value="25">65 lần</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // === DOM ELEMENTS ===
        const startButton = document.getElementById('btn-start');
        const statusDisplay = document.getElementById('status-display');
        const limitSelect = document.getElementById('slc-limit');

        // === STATE VARIABLES ===
        const STORAGE_KEY = 'bingSearchTracker';
        const allSearchTopics = [
          // Công nghệ & Khoa học
          'So sánh chip Apple M4 và Snapdragon X Elite',
          'Cách hoạt động của mạng 5G',
          'Tìm hiểu về điện toán đám mây (Cloud Computing)',
          'Ngôn ngữ lập trình Rust có ưu điểm gì',
          'Trí tuệ nhân tạo tạo sinh (Generative AI) là gì',
          'Học máy (Machine Learning) cho người mới bắt đầu',
          'An ninh mạng và cách bảo vệ dữ liệu cá nhân',
          'Công nghệ thực tế ảo (VR) và thực tế tăng cường (AR)',
          'Tìm hiểu về Big Data',
          'Lịch sử phát triển của Internet',
          'Giới thiệu về hệ điều hành Linux',
          'Các loại tấn công mạng phổ biến',
          'Xe điện và tương lai của ngành ô tô',
          'Công nghệ in 3D và ứng dụng',
          'Tìm hiểu về tàu vũ trụ Starship của SpaceX',
          'Kính thiên văn James Webb đã khám phá những gì',
          'Hố đen và những bí ẩn vũ trụ',
          'Thuyết tương đối của Einstein giải thích đơn giản',
          'Nguồn gốc của sự sống trên Trái Đất',
          'Biến đổi gen và công nghệ CRISPR',
          'Năng lượng hạt nhân và sự an toàn',
          'Các hành tinh trong hệ mặt trời',
          'Sao Hỏa và kế hoạch thuộc địa hóa',
          'Đại dương sâu thẳm và những sinh vật kỳ lạ',
          'Tác động của vi nhựa đến môi trường',
          'Cách hoạt động của pin lithium-ion',
          'Tìm hiểu về Robot và tự động hóa',
          'Internet Vạn Vật (IoT) là gì',
          'Cách xây dựng một PC gaming',
          'Phần mềm mã nguồn mở tốt nhất',
          'Đánh giá hệ điều hành Windows 12',
          'So sánh iOS và Android',
          'Lập trình game bắt đầu từ đâu',
          'Tìm hiểu về năng lượng mặt trời',
          'Sự nóng lên toàn cầu và băng tan ở hai cực',
          'Các loại khủng long phổ biến',
          'Vòng đời của một ngôi sao',
          'Nguyên tử và các hạt cơ bản',
          'Bảng tuần hoàn các nguyên tố hóa học',
          'Axit và bazơ trong hóa học',
          'Vắc-xin hoạt động như thế nào',
          'Hệ miễn dịch của con người',
          'Cấu trúc của DNA',
          'Giấc mơ và khoa học giải mã',
          'Tâm lý học đám đông',
          'Hiệu ứng giả dược (Placebo)',
          'Các loại tiền điện tử phổ biến',
          'NFT và ứng dụng trong nghệ thuật',
          'DeFi (Tài chính phi tập trung) là gì',
          'Cách đào Bitcoin',

          // Đời sống, Ẩm thực & Du lịch
          'Cách làm kim chi Hàn Quốc tại nhà',
          'Công thức pha trà sữa trân châu đường đen',
          'Các món ăn đặc sản Hà Nội',
          'Hướng dẫn làm món bún chả',
          'Các loại phô mai phổ biến trên thế giới',
          'Lịch sử của Pizza',
          'Ẩm thực đường phố Sài Gòn',
          'Cách nấu món cà ri gà',
          'Các loại rượu vang nổi tiếng',
          'Hướng dẫn làm bánh tiramisu',
          'Kinh nghiệm du lịch tự túc Đà Lạt',
          'Các bãi biển đẹp ở Phú Quốc',
          'Du lịch Mù Cang Chải mùa lúa chín',
          'Kinh nghiệm leo núi Fansipan',
          'Khám phá Vịnh Hạ Long trên du thuyền',
          'Những địa điểm phải đến ở Nhật Bản',
          'Du lịch bụi xuyên Việt cần chuẩn bị gì',
          'Các lễ hội đặc sắc ở Thái Lan',
          'Kinh nghiệm xin visa du lịch châu Âu',
          'Khám phá hang Sơn Đoòng',
          'Cách trồng rau sạch trên sân thượng',
          'Các loại cây không khí dễ chăm sóc',
          'Hướng dẫn chăm sóc hoa lan',
          'Cách tạo một khu vườn nhỏ trong ban công',
          'Các giống chó cảnh phổ biến',
          'Cách nuôi mèo cho người mới bắt đầu',
          'Chăm sóc cá cảnh và bể thủy sinh',
          'Mẹo dọn dẹp nhà cửa nhanh chóng',
          'Phong cách sống tối giản (Minimalism)',
          'Phương pháp quản lý thời gian Pomodoro',
          'Cách thiết lập mục tiêu SMART',
          'Các bài tập thể dục tại nhà hiệu quả',
          'Lợi ích của việc tập yoga',
          'Chế độ ăn Keto và Low-carb',
          'Cách thiền định để giảm căng thẳng',
          'Lợi ích của việc đọc sách mỗi ngày',
          'Mẹo học một ngôn ngữ mới',
          'Cách cải thiện kỹ năng giao tiếp',
          'Tư duy phản biện là gì',
          'Cách xây dựng thói quen tốt',
          'Quản lý tài chính cá nhân',
          'Các kênh đầu tư cho người mới',
          'Lập kế hoạch nghỉ hưu sớm',
          'Mẹo tiết kiệm tiền hiệu quả',
          'Tìm hiểu về bảo hiểm nhân thọ',
          'Các loại hình nghệ thuật đường phố',
          'Hướng dẫn chụp ảnh cho người mới',
          'Cách phối đồ theo phong cách vintage',
          'Các thương hiệu thời trang bền vững',
          'Lịch sử của quần jeans',

          // Lịch sử, Văn hóa & Xã hội
          'Lịch sử hình thành nước Văn Lang - Âu Lạc',
          'Các vị vua nổi tiếng trong lịch sử Việt Nam',
          'Chiến thắng Điện Biên Phủ',
          'Cuộc đời và sự nghiệp của Chủ tịch Hồ Chí Minh',
          'Văn hóa Đông Sơn và trống đồng',
          'Lịch sử áo dài Việt Nam',
          'Các di sản thế giới được UNESCO công nhận ở Việt Nam',
          'Tín ngưỡng thờ cúng Hùng Vương',
          'Sự tích bánh chưng, bánh giầy',
          'Tìm hiểu về 54 dân tộc Việt Nam',
          'Đế chế La Mã hùng mạnh',
          'Kim Tự Tháp và các Pharaoh Ai Cập',
          'Con đường tơ lụa huyền thoại',
          'Các chiến binh Samurai của Nhật Bản',
          'Thời đại Phục Hưng ở châu Âu',
          'Cách mạng công nghiệp lần thứ nhất',
          'Hai cuộc chiến tranh thế giới',
          'Chiến tranh Lạnh giữa Mỹ và Liên Xô',
          'Sự sụp đổ của Bức tường Berlin',
          'Lịch sử hình thành Liên minh châu Âu',
          'Thần thoại Hy Lạp và các vị thần trên đỉnh Olympus',
          'Những công trình kiến trúc cổ đại vĩ đại',
          'Nền văn minh Maya bí ẩn',
          'Cuộc đời của Thành Cát Tư Hãn',
          'Viking và những chuyến hải trình',
          'Triết học Khắc kỷ (Stoicism)',
          'Các tác phẩm của triết gia Plato',
          'Phong trào nhân quyền của Martin Luther King Jr.',
          'Cuộc đời của Nelson Mandela',
          'Các loại hình chính phủ trên thế giới',
          'Liên Hợp Quốc và vai trò gìn giữ hòa bình',
          'Toàn cầu hóa và tác động',
          'Các vấn đề xã hội ở các nước đang phát triển',
          'Quyền trẻ em và phụ nữ',
          'Lịch sử của Thế vận hội Olympic',
          'World Cup và những câu chuyện bên lề',
          'Các loại nhạc cụ truyền thống Việt Nam',
          'Tìm hiểu về nghệ thuật tuồng, chèo',
          'Múa rối nước và nét đặc sắc',
          'Ca trù, di sản văn hóa phi vật thể',
          'Tết Nguyên Đán và các phong tục',
          'Tết Trung Thu và sự tích chú Cuội',
          'Phong tục cưới hỏi truyền thống',
          'Các dòng tranh dân gian nổi tiếng',
          'Kiến trúc chùa chiền Việt Nam',
          'Phố cổ Hội An và lịch sử thương cảng',
          'Cố đô Huế và triều đại nhà Nguyễn',
          'Văn Miếu - Quốc Tử Giám',
          'Lịch sử Sài Gòn - TP. Hồ Chí Minh',

          // Giải trí, Nghệ thuật & Thể thao
          'Top phim đoạt giải Oscar hay nhất',
          'Các bộ phim của đạo diễn Christopher Nolan',
          'Lịch sử phát triển của điện ảnh',
          'Các vũ trụ điện ảnh lớn (MCU, DCU)',
          'Phim hoạt hình Ghibli và ý nghĩa',
          'Những bộ phim Hàn Quốc hay nhất',
          'Tìm hiểu về kỹ xảo điện ảnh (VFX)',
          'Các diễn viên nổi tiếng của Hollywood',
          'Review phim "Dune: Part Two"',
          'Những bộ phim tài liệu đáng xem',
          'Lịch sử nhạc Rock and Roll',
          'Các album nhạc hay nhất mọi thời đại',
          'Ban nhạc The Beatles và ảnh hưởng',
          'Nhạc K-Pop và làn sóng Hallyu',
          'Cuộc đời của Michael Jackson',
          'Các dòng nhạc phổ biến hiện nay',
          'Taylor Swift và The Eras Tour',
          'Hướng dẫn chơi guitar cơ bản',
          'Các loại nhạc cụ trong một dàn nhạc giao hưởng',
          'Tìm hiểu về nhạc Jazz',
          'Tiểu thuyết "Nhà giả kim" và ý nghĩa',
          'Các tác phẩm của nhà văn Nguyễn Nhật Ánh',
          'Top sách bán chạy nhất thế giới',
          'Hướng dẫn viết một câu chuyện ngắn',
          'Thơ Haiku của Nhật Bản',
          'Cuộc đời của họa sĩ Vincent van Gogh',
          'Bức tranh Mona Lisa và những bí ẩn',
          'Các trường phái hội họa nổi tiếng',
          'Nghệ thuật nhiếp ảnh đen trắng',
          'Tìm hiểu về nghệ thuật điêu khắc',
          'Lịch sử các câu lạc bộ bóng đá Ngoại hạng Anh',
          'Cuộc đời của Lionel Messi và Cristiano Ronaldo',
          'Giải bóng rổ nhà nghề Mỹ (NBA)',
          'Huyền thoại quyền Anh Muhammad Ali',
          'Giải quần vợt Grand Slam',
          'Môn thể thao vua và luật chơi',
          'Lịch sử các kỳ World Cup',
          'Các vận động viên điền kinh vĩ đại',
          'Tìm hiểu về giải đua xe Công thức 1 (F1)',
          'Các môn thể thao dưới nước',
          'Game eSports và các giải đấu lớn',
          'Lịch sử phát triển của game console',
          'Top game thế giới mở hay nhất',
          'Các nhân vật game nổi tiếng',
          'Hướng dẫn stream game trên Twitch/YouTube',
          'Review game "Elden Ring"',
          'Văn hóa game ở Nhật Bản',
          'Các công ty phát triển game hàng đầu',
          'Tương lai của ngành công nghiệp game',
          'Game indie và sự sáng tạo',

          // Các chủ đề ngẫu nhiên khác
          'Ngôn ngữ ký hiệu và cách học',
          'Mã Morse và lịch sử',
          'Các công trình kiến trúc hiện đại ấn tượng',
          'Bí ẩn Tam giác Bermuda',
          'Câu chuyện về tàu Titanic',
          'Các loại ảo ảnh quang học',
          'Kỷ lục Guinness thế giới kỳ lạ',
          'Các phát minh tình cờ thay đổi thế giới',
          'Lịch sử của cà phê',
          'Ngành công nghiệp thời trang nhanh',
          'Các loại đá quý và ý nghĩa',
          'Nghệ thuật gấp giấy Origami',
          'Tìm hiểu về cờ vua',
          'Các loại võ thuật trên thế giới',
          'Hiện tượng Déjà vu',
          'Sóng thần và cách hình thành',
          'Động đất và thang đo Richter',
          'Các loài động vật có nguy cơ tuyệt chủng',
          'Rạn san hô và hệ sinh thái biển',
          'Lịch sử của tiền tệ',
          'Các sàn giao dịch chứng khoán lớn nhất',
          'Lạm phát và ảnh hưởng đến kinh tế',
          'Khủng hoảng kinh tế toàn cầu',
          'Tâm lý học màu sắc trong marketing',
          'Các chiến dịch quảng cáo sáng tạo',
          'Xây dựng thương hiệu cá nhân',
          'Kỹ năng đàm phán hiệu quả',
          'Lãnh đạo và quản lý nhóm',
          'Các mô hình kinh doanh khởi nghiệp',
          'Trí tuệ cảm xúc (EQ) là gì',
          'Cách vượt qua nỗi sợ hãi',
          'Xây dựng sự tự tin',
          'Các mối quan hệ xã hội lành mạnh',
          'Ngôn ngữ cơ thể và ý nghĩa',
          'Cách nhận biết tin giả (Fake News)',
          'Giáo dục trực tuyến và tương lai',
          'Các trường đại học hàng đầu thế giới',
          'Phương pháp học tập hiệu quả',
          'Tầm quan trọng của giáo dục mầm non',
          'Các loại hình thông minh',
          'Hệ thống y tế và sức khỏe cộng đồng',
          'Các bệnh phổ biến và cách phòng ngừa',
          'Tầm quan trọng của giấc ngủ',
          'Chế độ ăn uống cân bằng',
          'Lợi ích của việc uống đủ nước',
          'Sơ cứu cơ bản khi gặp tai nạn',
          'Hiến máu và ý nghĩa',
          'Sức khỏe tinh thần và cách chăm sóc',
          'Luật giao thông đường bộ',
          'Quyền và nghĩa vụ của công dân',
          'So sánh các dịch vụ streaming phim',
          'Cách viết một CV ấn tượng',
          'Kỹ năng trả lời phỏng vấn xin việc',
          'Làm việc từ xa (Remote Work) và lợi ích',
          'Cân bằng giữa công việc và cuộc sống',
          'Hiện tượng kiệt sức (Burnout) nơi công sở',
          'Cách sử dụng mạng xã hội hiệu quả',
          'Digital Marketing và các kênh phổ biến',
          'SEO (Tối ưu hóa công cụ tìm kiếm) là gì',
          'Content Marketing và cách xây dựng nội dung',
          'Tầm quan trọng của việc tái chế rác',
          'Sử dụng sản phẩm thân thiện với môi trường',
          'Lối sống không rác thải (Zero Waste)',
          'Các nguồn năng lượng sạch',
          'Ảnh hưởng của biến đổi khí hậu đến Việt Nam',
          'Tìm hiểu về trà đạo Nhật Bản',
          'Các loại sushi và sashimi',
          'Lễ hội hoa anh đào (Hanami)',
          'Văn hóa Otaku và Anime/Manga',
          'Võ sĩ Sumo và các quy tắc',
          'Vạn Lý Trường Thành của Trung Quốc',
          'Tử Cấm Thành và các triều đại vua chúa',
          'Ẩm thực Tứ Xuyên và độ cay',
          'Tết Nguyên Tiêu ở các nước châu Á',
          'Tìm hiểu về Kinh kịch (Peking Opera)',
          'Đấu trường La Mã Colosseum',
          'Tháp nghiêng Pisa và lịch sử',
          'Thành phố Venice và hệ thống kênh đào',
          'Ẩm thực Ý và các món mì pasta',
          'Lịch sử thương hiệu Ferrari',
          'Tượng Nữ thần Tự do ở Mỹ',
          'Hollywood và ngành công nghiệp điện ảnh',
          'Lịch sử nhạc Jazz và Blues',
          'Lễ Tạ ơn (Thanksgiving)',
          'Grand Canyon và vẻ đẹp thiên nhiên',
          'Kim tự tháp Chichen Itza của người Maya',
          'Lễ hội người chết ở Mexico',
          'Điệu nhảy Tango của Argentina',
          'Rừng rậm Amazon và đa dạng sinh học',
          'Lễ hội Carnival ở Brazil',
          'Nhà hát Opera Sydney ở Úc',
          'Chuột túi Kangaroo và gấu Koala',
          'Các bộ lạc thổ dân châu Úc',
          'Rạn san hô Great Barrier',
          'Môn thể thao Cricket và Rugby',
          'Kim tự tháp Giza và tượng Nhân sư',
          'Sông Nile và nền văn minh Ai Cập cổ đại',
          'Chữ tượng hình và cách giải mã',
          'Các vị thần Ai Cập cổ đại',
          'Bí ẩn lăng mộ vua Tutankhamun',
          'Phật giáo và các giáo lý cơ bản',
          'Nhà thờ Đức Bà Paris và kiến trúc Gothic',
          'Tìm hiểu về Hồi giáo',
          'Đền Angkor Wat ở Campuchia',
          'Các tôn giáo lớn trên thế giới',
          'Cách hoạt động của thị trường chứng khoán',
          'Quỹ đầu tư chỉ số (Index Fund) là gì',
          'Phân tích kỹ thuật trong đầu tư',
          'Tỷ phú Warren Buffett và triết lý đầu tư',
          'Bong bóng kinh tế và các vụ sụp đổ',
          'Chỉnh sửa video cho người mới bắt đầu',
          'Các phần mềm thiết kế đồ họa phổ biến',
          'Cách tạo một podcast',
          'Xây dựng kênh YouTube thành công',
          'Viết blog và cách kiếm tiền',
          'Luật hấp dẫn và sức mạnh của tư duy',
          'Cách rèn luyện trí nhớ',
          'Đọc nhanh và phương pháp luyện tập',
          'Sơ đồ tư duy (Mind Map) và ứng dụng',
          'Cách học để hiểu sâu, nhớ lâu',
          'Dinh dưỡng cho người tập gym',
          'Các loại thực phẩm tốt cho não bộ',
          'Tác hại của đồ ăn nhanh',
          'Ăn chay và lợi ích sức khỏe',
          'Các loại vitamin và khoáng chất cần thiết',
          'Nhạc cụ dân tộc các vùng miền Việt Nam',
          'Múa sạp và văn hóa Tây Bắc',
          'Đờn ca tài tử Nam Bộ',
          'Văn hóa cồng chiêng Tây Nguyên',
          'Hát Xoan Phú Thọ',
          'Lịch sử phát triển chữ Quốc ngữ',
          'Phong trào Thơ mới 1932-1945',
          'Tác phẩm "Truyện Kiều" của Nguyễn Du',
          'Văn học hiện thực phê phán',
          'Các nhà văn đoạt giải Nobel Văn học',
          'Cách phân biệt các loại vải may mặc',
          'Tái chế quần áo cũ',
          'Lịch sử của giày sneaker',
          'Tuần lễ thời trang Paris, New York',
          'Các biểu tượng thời trang thế giới',
          'Hiện tượng nguyệt thực và nhật thực',
          'Sao băng và mưa sao băng',
          'Cực quang và cách hình thành',
          'Các chòm sao trên bầu trời',
          'Du hành thời gian có khả thi không',
          'Các loại robot hút bụi thông minh',
          'Nhà thông minh (Smart Home) và các thiết bị',
          'Trợ lý ảo Google Assistant và Siri',
          'Đồng hồ thông minh và tính năng',
          'Điện thoại gập và tương lai',
          'Tác động của mạng xã hội đến giới trẻ',
          'Nghiện game và cách khắc phục',
          'Bắt nạt trên mạng (Cyberbullying)',
          'Bảo vệ trẻ em trên không gian mạng',
          'Quyền riêng tư trong thời đại số',
          'Cách làm việc nhóm hiệu quả',
          'Giải quyết xung đột trong công việc',
          'Văn hóa doanh nghiệp là gì',
          'Phản hồi và góp ý mang tính xây dựng',
          'Nghệ thuật kể chuyện (Storytelling)',
          'Làm thế nào để trở thành người hướng nội thành công',
          'Cách đối phó với áp lực đồng trang lứa',
          'Tìm kiếm và định vị đam mê cá nhân',
          'Du học và những điều cần biết',
          'Học bổng chính phủ các nước',
          'Lợi ích của việc đi ngủ sớm',
          'Tác hại của việc thức khuya',
          'Stress và cách quản lý hiệu quả',
          'Các hoạt động giải trí lành mạnh',
          'Tình nguyện và hoạt động xã hội',
          'Bảo hiểm y tế và các quyền lợi',
          'Khám sức khỏe định kỳ và tầm quan trọng',
          'Phòng chống dịch bệnh theo mùa',
          'An toàn thực phẩm và cách lựa chọn',
          'Nói không với thực phẩm bẩn',
          'Lịch sử hình thành Trái Đất',
          'Sự kiện tuyệt chủng hàng loạt',
          'Kỷ băng hà và ảnh hưởng',
          'Dịch chuyển lục địa',
          'Cấu tạo của núi lửa và động đất',
          'Hệ sinh thái rừng nhiệt đới',
          'Hệ sinh thái sa mạc',
          'Động vật có vú lớn nhất thế giới',
          'Các loài chim di cư',
          'Đời sống của loài ong và kiến',
          'Sự khác biệt giữa virus và vi khuẩn',
          'Kháng sinh và hiện tượng kháng kháng sinh',
          'Công nghệ thực phẩm và chất bảo quản',
          'Quá trình lên men trong sản xuất bia, rượu',
          'Lịch sử của sô cô la',
          'Các loại thảo mộc và gia vị',
          'Nghệ thuật pha chế cà phê',
          'Văn hóa uống trà trên thế giới',
          'Tìm hiểu về rượu Whisky',
          'Các giải đấu quần vợt danh giá',
          'Lịch sử môn bóng chuyền',
          'Bơi lội và các kiểu bơi',
          'Cờ tướng và các thế cờ hay',
          'Trò chơi dân gian Việt Nam',
          'Ảo thuật và các nhà ảo thuật gia nổi tiếng',
          'Nghệ thuật xiếc và các loại hình',
          'Stand-up comedy (Hài độc thoại)',
          'Nhà hát Broadway và các vở nhạc kịch',
          'Múa ballet cổ điển',
          'Các loại hình kiến trúc độc đáo',
          'Trường phái kiến trúc Bauhaus',
          'Kiến trúc sư Zaha Hadid và các công trình',
          'Tòa nhà cao nhất thế giới Burj Khalifa',
          '7 kỳ quan thế giới cổ đại và hiện đại',
          'Các thành phố bị lãng quên trong lịch sử',
          'Bí ẩn về Atlantis',
          'Câu chuyện về El Dorado - thành phố vàng',
          'Những kho báu bị mất tích',
          'Hải tặc và những câu chuyện huyền thoại',
        ];
        let usedTopicsToday = [];
        let searchCounter = 0;
        let searchLimit = 35;

        // === CORE FUNCTIONS ===

        // Lấy ngày hiện tại theo định dạng YYYY-MM-DD để so sánh
        const getTodaysDate = () => new Date().toISOString().slice(0, 10);

        // Tải trạng thái đã lưu từ localStorage
        const loadState = () => {
          const storedData = localStorage.getItem(STORAGE_KEY);
          if (storedData) {
            const parsedData = JSON.parse(storedData);
            // Chỉ tải lại nếu dữ liệu được lưu trong ngày hôm nay
            if (parsedData.date === getTodaysDate()) {
              usedTopicsToday = parsedData.usedTopics;
            }
          }
          searchCounter = usedTopicsToday.length;
          updateStatus();
        };

        // Lưu trạng thái hiện tại vào localStorage
        const saveState = () => {
          const state = { date: getTodaysDate(), usedTopics: usedTopicsToday };
          localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        };

        // Cập nhật giao diện (số đếm, trạng thái nút)
        const updateStatus = () => {
          searchLimit = parseInt(limitSelect.value, 10);
          const progress = `(${searchCounter}/${searchLimit})`;

          if (searchCounter >= searchLimit) {
            statusDisplay.innerHTML = `✅ Hoàn thành ${progress}!`;
            startButton.disabled = true;
            startButton.innerHTML = `<i class="fas fa-check"></i> Xong`;
          } else {
            statusDisplay.innerHTML = `Đã tìm ${progress}. Nhấn để tìm tiếp.`;
            startButton.disabled = false;
            startButton.innerHTML = `<i class="fas fa-play"></i> Tìm tiếp`;
          }
        };

        // Hàm chính, thực hiện MỘT lần tìm kiếm mỗi khi được gọi
        const performSingleSearch = () => {
          if (searchCounter >= searchLimit) {
            updateStatus();
            return; // Dừng nếu đã đủ số lần
          }

          // Lọc ra các chủ đề chưa tìm
          const availableTopics = allSearchTopics.filter((topic) => !usedTopicsToday.includes(topic));
          if (availableTopics.length === 0) {
            statusDisplay.innerText = 'Đã hết chủ đề để tìm trong danh sách!';
            startButton.disabled = true;
            return;
          }

          // Chọn ngẫu nhiên một chủ đề và đánh dấu đã dùng
          const randomTopic = availableTopics[Math.floor(Math.random() * availableTopics.length)];
          usedTopicsToday.push(randomTopic);
          saveState();
          searchCounter++;

          // Mở tab mới - hành động này được phép vì nó là kết quả trực tiếp của một cú click
          const searchURL = `https://www.bing.com/search?q=${encodeURIComponent(randomTopic)}`;
          try {
            const openedTab = window.open(searchURL, '_blank');
            if (!openedTab) {
              throw new Error('Pop-up bị chặn!');
            }
          } catch (error) {
            alert('Không thể mở tab mới. Vui lòng kiểm tra cài đặt trình chặn Pop-up của trình duyệt!');
            // Hoàn lại trạng thái vì tìm kiếm không thành công
            usedTopicsToday.pop();
            saveState();
            searchCounter--;
          }

          updateStatus();
        };

        // === INITIALIZATION ===

        // Gán sự kiện cho các element
        startButton.addEventListener('click', performSingleSearch);
        limitSelect.addEventListener('change', updateStatus); // Cập nhật lại giao diện khi người dùng đổi số lần

        // Tải trạng thái lần đầu khi mở trang
        loadState();
      });
    </script>
  </body>
</html>
